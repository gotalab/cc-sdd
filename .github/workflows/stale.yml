name: Auto Close Follow-up Issues

on:
  schedule:
    # Run every day at 00:00 UTC
    - cron: '0 0 * * *'
  workflow_dispatch:

permissions:
  issues: write

jobs:
  close-follow-up-issues:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v9
        with:
          # Do not automatically mark issues as stale.
          # Maintainers manually add the label when follow-up is needed.
          days-before-stale: -1

          # Automatically close labeled issues after 7 days.
          days-before-close: 7

          # Process only issues with this label.
          only-issue-labels: 'awaiting-response'

          # Keep pull requests out of scope for this workflow.
          days-before-pr-stale: -1
          days-before-pr-close: -1

          # Comment posted when closing an issue.
          close-issue-message: |
            Closing this issue because it has been marked as "awaiting-response" and no follow-up was received within 7 days.
            If you still need help, please comment and we can reopen it.

          # Minimum operation set for predictable behavior.
          operations-per-run: 100
