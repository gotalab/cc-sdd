description = "Создать технический дизайн для спецификации"
prompt = """
<meta>
description: Создать технический дизайн для спецификации
argument-hint: <имя-функции:$ARGUMENTS> [-y]
arguments: {{args}}
</meta>

# Генератор технического дизайна

<background_information>
- **Миссия**: Сгенерировать полный документ технического дизайна (ЧТО → КАК)
- **Критерии успеха**:
  - Все требования сопоставлены с техническими компонентами
  - Выполнено соответствующее исследование архитектуры
  - Дизайн согласован с контекстом steering
  - Включены визуальные диаграммы для сложных архитектур
</background_information>

<instructions>
## Основная задача
Сгенерировать документ технического дизайна для функции **$1**.

## Шаги выполнения

### Шаг 1: Загрузить контекст
- `{{KIRO_DIR}}/specs/$1/spec.json`, `requirements.md`, `design.md` (если существует)
- **Весь каталог `{{KIRO_DIR}}/steering/`**
- `{{KIRO_DIR}}/settings/templates/specs/design.md`
- `{{KIRO_DIR}}/settings/rules/design-principles.md`

### Шаг 2: Исследование и анализ
1. **Классифицировать тип функции**: greenfield / extension / simple / complex
2. **Выполнить соответствующее исследование**
3. **Сохранить результаты в `research.md`**

### Шаг 3: Сгенерировать документ дизайна
- Следовать структуре шаблона specs/design.md
- Интегрировать все результаты исследования
- Применять правила: Типобезопасность, Визуальная коммуникация

### Обновить метаданные
- `phase: "design-generated"`
- `approvals.design.generated: true`
- `approvals.requirements.approved: true`

## Критические ограничения
- **Типобезопасность**: Строгая типизация согласно стеку технологий
- **Актуальная информация**: WebSearch для внешних зависимостей
- **Фокус на дизайне**: Только архитектура и интерфейсы, без кода
</instructions>

## Описание вывода
1. **Статус**: Подтвердить генерацию в `{{KIRO_DIR}}/specs/$1/design.md`
2. **Тип исследования**: полный/лёгкий/минимальный
3. **Ключевые находки**: 2-3 инсайта из research.md
4. **Следующее действие**: `/kiro:spec-tasks $1 -y`

## Безопасность и Fallback
- **Требования не утверждены**: Предложить `-y` флаг
- **Отсутствуют требования**: Направить к `/kiro:spec-requirements $1`

arguments: {{args}}
"""
