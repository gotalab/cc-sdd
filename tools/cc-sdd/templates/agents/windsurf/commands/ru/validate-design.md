---
description: Интерактивная проверка качества технического дизайна
allowed-tools: Read, Glob, Grep
argument-hint: <имя-функции>
---

# Валидация технического дизайна

<background_information>
- **Миссия**: Провести интерактивную проверку качества технического дизайна для обеспечения готовности к реализации
- **Критерии успеха**:
  - Критические проблемы выявлены (максимум 3 наиболее важных)
  - Сбалансированная оценка с признанием сильных сторон
  - Чёткое решение GO/NO-GO с обоснованием
  - Действенная обратная связь для улучшений при необходимости
</background_information>

<instructions>
## Основная задача
Интерактивная проверка качества дизайна для функции **$1** на основе утверждённых требований и документа дизайна.

## Шаги выполнения

1. **Загрузить контекст**:
   - Прочитать `{{KIRO_DIR}}/specs/$1/spec.json` для языка и метаданных
   - Прочитать `{{KIRO_DIR}}/specs/$1/requirements.md` для требований
   - Прочитать `{{KIRO_DIR}}/specs/$1/design.md` для документа дизайна
   - **Загрузить ВЕСЬ контекст steering**: Прочитать весь каталог `{{KIRO_DIR}}/steering/` включая:
     - Стандартные файлы: `structure.md`, `tech.md`, `product.md`
     - Все кастомные файлы steering (независимо от настроек режима)
     - Это обеспечивает полную память и контекст проекта

2. **Прочитать руководства по проверке**:
   - Прочитать `{{KIRO_DIR}}/settings/rules/design-review.md` для критериев и процесса проверки

3. **Выполнить проверку дизайна**:
   - Следовать процессу design-review.md: Анализ → Критические проблемы → Сильные стороны → GO/NO-GO
   - Ограничиться 3 наиболее важными проблемами
   - Вести интерактивный диалог с пользователем
   - Использовать язык, указанный в spec.json, для вывода

4. **Предоставить решение и следующие шаги**:
   - Чёткое решение GO/NO-GO с обоснованием
   - Направить пользователя по дальнейшим действиям на основе решения

## Важные ограничения
- **Гарантия качества, не погоня за совершенством**: Принять приемлемый риск
- **Только критический фокус**: Максимум 3 проблемы, только те, что значительно влияют на успех
- **Интерактивный подход**: Вести диалог, не односторонняя оценка
- **Сбалансированная оценка**: Признавать и сильные, и слабые стороны
- **Действенная обратная связь**: Все предложения должны быть реализуемы
</instructions>

## Руководство по инструментам
- **Сначала читать**: Загрузить весь контекст (спецификация, steering, правила) перед проверкой
- **Grep при необходимости**: Поиск в кодовой базе для валидации паттернов или проверок интеграции
- **Интерактивно**: Взаимодействовать с пользователем на протяжении процесса проверки

## Описание вывода
Предоставить вывод на языке, указанном в spec.json:

1. **Сводка проверки**: Краткий обзор (2-3 предложения) качества дизайна и готовности
2. **Критические проблемы**: Максимум 3, следуя формату design-review.md
3. **Сильные стороны дизайна**: 1-2 положительных аспекта
4. **Итоговая оценка**: Решение GO/NO-GO с обоснованием и следующими шагами

**Требования к формату**:
- Использовать заголовки Markdown для ясности
- Следовать формату вывода design-review.md
- Сводка должна быть краткой

## Безопасность и Fallback

### Сценарии ошибок
- **Отсутствует дизайн**: Если design.md не существует, остановить с сообщением: "Сначала запустите `/kiro:spec-design $1` для генерации документа дизайна"
- **Дизайн не сгенерирован**: Если фаза дизайна не отмечена как сгенерированная в spec.json, предупредить но продолжить проверку
- **Каталог Steering пустой**: Предупредить пользователя, что контекст проекта отсутствует и может повлиять на качество проверки
- **Язык не определён**: По умолчанию английский (`en`), если spec.json не указывает язык

### Следующая фаза: Генерация задач

**Если дизайн прошёл валидацию (решение GO)**:
- Просмотреть обратную связь и применить изменения при необходимости
- Запустить `/kiro:spec-tasks $1` для генерации задач реализации
- Или `/kiro:spec-tasks $1 -y` для авто-утверждения и прямого продолжения

**Если дизайн требует доработки (решение NO-GO)**:
- Устранить выявленные критические проблемы
- Повторно запустить `/kiro:spec-design $1` с улучшениями
- Повторно валидировать с `/kiro:validate-design $1`

**Примечание**: Валидация дизайна рекомендуется, но опциональна. Проверка качества помогает выявить проблемы на ранней стадии.
