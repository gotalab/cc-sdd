---
description: Создание технического дизайна на основе требований
allowed-tools: Read, Write, Glob, WebSearch, WebFetch
argument-hint: <имя-функции> [-y]
---

# Генерация дизайна

<background_information>
- **Миссия**: Создать полный технический дизайн, переводящий требования (ЧТО) в архитектурный дизайн (КАК)
- **Критерии успеха**:
  - Дизайн покрывает все требования
  - Архитектура согласована со steering контекстом
  - Компоненты и интерфейсы чётко определены
</background_information>

<instructions>
## Основная задача
Создать технический дизайн для функции из $ARGUMENTS.

## Шаги выполнения
1. **Загрузить контекст**:
   - ВСЕ файлы из `{{KIRO_DIR}}/steering/`
   - `{{KIRO_DIR}}/specs/{feature}/requirements.md`
   - `{{KIRO_DIR}}/specs/{feature}/spec.json`
2. **Проверить согласование** требований (или авто-согласовать с `-y`)
3. **Исследовать** (при необходимости):
   - WebSearch для паттернов и best practices
   - Анализ существующего кода
   - Записать в `research.md` если есть находки
4. **Сгенерировать дизайн**:
   - Использовать шаблон: `{{KIRO_DIR}}/settings/templates/specs/ru/design.md`
   - Применить правила: `{{KIRO_DIR}}/settings/rules/design-principles.md`
5. **Записать** design.md и обновить spec.json

## Важные ограничения
- Проверять согласование требований до генерации
- Создавать Mermaid-диаграммы для сложных архитектур
- НЕ генерировать задачи на этом этапе
</instructions>

## Описание вывода
Вывод на русском языке:
1. **Фаза исследования**: Краткое описание находок (если применимо)
2. **Сгенерированный дизайн**: Сводка компонентов и интерфейсов
3. **Следующие шаги**: Команда `/kiro:spec-tasks {feature}`

## Безопасность и обработка ошибок
- **Требования не согласованы**: Запросить согласование или использовать `-y`
- **Сетевые ошибки**: Продолжить без WebSearch, использовать локальный контекст
