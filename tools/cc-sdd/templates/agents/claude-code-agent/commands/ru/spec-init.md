---
description: Инициализация новой спецификации с подробным описанием проекта
allowed-tools: Bash, Read, Write, Glob
argument-hint: <описание-проекта>
---

# Инициализация спецификации

<background_information>
- **Миссия**: Инициализировать первую фазу разработки на основе спецификаций путём создания структуры директорий и метаданных
- **Критерии успеха**:
  - Сгенерировать подходящее имя функции из описания проекта
  - Создать уникальную структуру спецификации без конфликтов
  - Обеспечить чёткий путь к следующей фазе (генерация требований)
</background_information>

<instructions>
## Основная задача
Сгенерировать уникальное имя функции из описания проекта ($ARGUMENTS) и инициализировать структуру спецификации.

## Шаги выполнения
1. **Проверка уникальности**: Проверить `{{KIRO_DIR}}/specs/` на конфликты имён (добавить числовой суффикс при необходимости)
2. **Создание директории**: `{{KIRO_DIR}}/specs/[имя-функции]/`
3. **Инициализация файлов из шаблонов**:
   - Прочитать `{{KIRO_DIR}}/settings/templates/specs/ru/init.json`
   - Прочитать `{{KIRO_DIR}}/settings/templates/specs/ru/requirements-init.md`
   - Заменить плейсхолдеры:
     - `{{FEATURE_NAME}}` → сгенерированное имя функции
     - `{{TIMESTAMP}}` → текущая временная метка ISO 8601
     - `{{PROJECT_DESCRIPTION}}` → $ARGUMENTS
   - Записать `spec.json` и `requirements.md` в директорию спецификации

## Важные ограничения
- НЕ генерировать требования/дизайн/задачи на этом этапе
- Следовать принципам поэтапной разработки
- Соблюдать строгое разделение фаз
- На этой фазе выполняется только инициализация
</instructions>

## Руководство по инструментам
- Использовать **Glob** для проверки существующих директорий спецификаций на уникальность имени
- Использовать **Read** для получения шаблонов: `init.json` и `requirements-init.md`
- Использовать **Write** для создания spec.json и requirements.md после замены плейсхолдеров
- Выполнять валидацию перед любой операцией записи

## Описание вывода
Вывод на русском языке со следующей структурой:

1. **Сгенерированное имя функции**: в формате `имя-функции` с обоснованием в 1-2 предложения
2. **Сводка проекта**: Краткая сводка (1 предложение)
3. **Созданные файлы**: Маркированный список с полными путями
4. **Следующий шаг**: Блок кода с командой `/kiro:spec-requirements <имя-функции>`
5. **Примечания**: Объяснение, почему выполнена только инициализация (2-3 предложения о разделении фаз)

## Безопасность и обработка ошибок
- **Неоднозначное имя функции**: Предложить 2-3 варианта и попросить пользователя выбрать
- **Шаблон отсутствует**: Сообщить об ошибке с указанием пути отсутствующего файла
- **Конфликт директорий**: Добавить числовой суффикс (например, `feature-name-2`) и уведомить пользователя
- **Ошибка записи**: Сообщить об ошибке с указанием пути
