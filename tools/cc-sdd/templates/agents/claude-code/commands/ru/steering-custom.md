---
description: Создать кастомные steering документы для специализированных контекстов проекта
allowed-tools: Bash, Read, Write, Edit, MultiEdit, Glob, Grep, LS
---

# Создание кастомного Kiro Steering

<background_information>
**Роль**: Создавать специализированные steering документы помимо основных файлов (product, tech, structure).

**Миссия**: Помочь пользователям создать специфичную для домена память проекта для специализированных областей.

**Критерии успеха**:
- Кастомный steering фиксирует специализированные паттерны
- Следует тем же принципам гранулярности, что и основной steering
- Обеспечивает ясную ценность для конкретного домена
</background_information>

<instructions>
## Рабочий процесс

1. **Спросить пользователя** о потребностях кастомного steering:
   - Домен/тема (например, "API стандарты", "подход к тестированию")
   - Конкретные требования или паттерны для документирования

2. **Проверить существование шаблона**:
   - Загрузить из `{{KIRO_DIR}}/settings/templates/steering-custom/{name}.md` если доступен
   - Использовать как отправную точку, кастомизировать под проект

3. **Анализировать кодовую базу** (JIT) для релевантных паттернов:
   - **Glob** для связанных файлов
   - **Read** для существующих реализаций
   - **Grep** для конкретных паттернов

4. **Сгенерировать кастомный steering**:
   - Следовать структуре шаблона если доступна
   - Применять принципы из `{{KIRO_DIR}}/settings/rules/steering-principles.md`
   - Фокус на паттернах, не исчерпывающих списках
   - Ограничить 100-200 строками (2-3 минуты чтения)

5. **Создать файл** в `{{KIRO_DIR}}/steering/{name}.md`

## Доступные шаблоны

Шаблоны доступны в `{{KIRO_DIR}}/settings/templates/steering-custom/`:

1. **api-standards.md** - REST/GraphQL соглашения, обработка ошибок
2. **testing.md** - Организация тестов, моки, покрытие
3. **security.md** - Паттерны аутентификации, валидация ввода, секреты
4. **database.md** - Дизайн схемы, миграции, паттерны запросов
5. **error-handling.md** - Типы ошибок, логирование, стратегии повторов
6. **authentication.md** - Потоки аутентификации, разрешения, управление сессиями
7. **deployment.md** - CI/CD, окружения, процедуры отката

Загружать шаблон при необходимости, кастомизировать под проект.

## Принципы Steering

Из `{{KIRO_DIR}}/settings/rules/steering-principles.md`:

- **Паттерны вместо списков**: Документировать паттерны, не каждый файл/компонент
- **Один домен**: Одна тема на файл
- **Конкретные примеры**: Показывать паттерны с кодом
- **Поддерживаемый размер**: 100-200 строк типично
- **Безопасность прежде всего**: Никогда не включать секреты или чувствительные данные

</instructions>

## Руководство по инструментам

- **Read**: Загрузить шаблон, анализировать существующий код
- **Glob**: Найти связанные файлы для анализа паттернов
- **Grep**: Поиск конкретных паттернов
- **LS**: Понять релевантную структуру

**Стратегия JIT**: Загружать шаблон только при создании этого типа steering.

## Описание вывода

Сводка в чат с расположением файла (файл создаётся напрямую).

```
✅ Кастомный Steering создан

## Создано:
- {{KIRO_DIR}}/steering/api-standards.md

## Основано на:
- Шаблон: api-standards.md
- Анализирован: каталог src/api/
- Извлечено: REST соглашения, формат ошибок

## Содержимое:
- Паттерны именования эндпоинтов
- Формат запросов/ответов
- Соглашения обработки ошибок
- Подход к аутентификации

Проверьте и кастомизируйте по необходимости.
```

## Примеры

### Успех: API стандарты
**Вход**: "Создать steering для API стандартов"  
**Действие**: Загрузить шаблон, анализировать src/api/, извлечь паттерны  
**Выход**: api-standards.md с проект-специфичными REST соглашениями

### Успех: Стратегия тестирования
**Вход**: "Документировать наш подход к тестированию"  
**Действие**: Загрузить шаблон, анализировать файлы тестов, извлечь паттерны  
**Выход**: testing.md с организацией тестов и стратегиями моков

## Безопасность и Fallback

- **Нет шаблона**: Сгенерировать с нуля на основе доменных знаний
- **Безопасность**: Никогда не включать секреты (загрузить принципы)
- **Валидация**: Убедиться, что не дублирует содержимое основного steering

## Примечания

- Шаблоны - отправные точки, кастомизировать под проект
- Следовать тем же принципам гранулярности, что и основной steering
- Все файлы steering загружаются как память проекта
- Кастомные файлы так же важны, как основные
- Избегать документирования каталогов инструментов агентов (например, `.cursor/`, `.gemini/`, `.claude/`)
- Лёгкие ссылки на `{{KIRO_DIR}}/specs/` и `{{KIRO_DIR}}/steering/` допустимы; избегать других каталогов `.kiro/`
