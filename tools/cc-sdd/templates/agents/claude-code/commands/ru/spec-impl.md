---
description: Выполнить задачи спецификации с использованием TDD
allowed-tools: Bash, Read, Write, Edit, MultiEdit, Grep, Glob, LS, WebFetch, WebSearch
argument-hint: <имя-функции> [номера-задач]
---

# Исполнитель задач реализации

<background_information>
- **Миссия**: Выполнить задачи реализации с использованием методологии Test-Driven Development на основе утверждённых спецификаций
- **Критерии успеха**:
  - Все тесты написаны перед кодом реализации
  - Код проходит все тесты без регрессий
  - Задачи помечены как выполненные в tasks.md
  - Реализация соответствует дизайну и требованиям
</background_information>

<instructions>
## Основная задача
Выполнить задачи реализации для функции **$1** с использованием Test-Driven Development.

## Шаги выполнения

### Шаг 1: Загрузить контекст

**Прочитать весь необходимый контекст**:
- `{{KIRO_DIR}}/specs/$1/spec.json`, `requirements.md`, `design.md`, `tasks.md`
- **Весь каталог `{{KIRO_DIR}}/steering/`** для полной памяти проекта

**Проверить утверждения**:
- Проверить, что задачи утверждены в spec.json (остановить если нет, см. Безопасность и Fallback)

### Шаг 2: Выбрать задачи

**Определить какие задачи выполнять**:
- Если `$2` указан: Выполнить указанные номера задач (например, "1.1" или "1,2,3")
- Иначе: Выполнить все ожидающие задачи (непомеченные `- [ ]` в tasks.md)

### Шаг 3: Выполнить с TDD

Для каждой выбранной задачи следовать циклу TDD Кента Бека:

1. **RED - Написать падающий тест**:
   - Написать тест для следующего небольшого элемента функциональности
   - Тест должен падать (код ещё не существует)
   - Использовать описательные имена тестов

2. **GREEN - Написать минимальный код**:
   - Реализовать простейшее решение для прохождения теста
   - Фокус только на прохождении ЭТОГО теста
   - Избегать переусложнения

3. **REFACTOR - Очистить**:
   - Улучшить структуру и читаемость кода
   - Удалить дублирование
   - Применить паттерны проектирования где уместно
   - Убедиться, что все тесты всё ещё проходят после рефакторинга

4. **VERIFY - Проверить качество**:
   - Все тесты проходят (новые и существующие)
   - Нет регрессий в существующей функциональности
   - Покрытие кода сохранено или улучшено

5. **ОТМЕТИТЬ ВЫПОЛНЕННЫМ**:
   - Обновить чекбокс с `- [ ]` на `- [x]` в tasks.md

## Критические ограничения
- **TDD обязательно**: Тесты ДОЛЖНЫ быть написаны перед кодом реализации
- **Область задачи**: Реализовать только то, что требует конкретная задача
- **Тестовое покрытие**: Весь новый код должен иметь тесты
- **Без регрессий**: Существующие тесты должны продолжать проходить
- **Соответствие дизайну**: Реализация должна следовать спецификациям design.md
</instructions>

## Руководство по инструментам
- **Сначала читать**: Загрузить весь контекст перед реализацией
- **Сначала тесты**: Писать тесты перед кодом
- Использовать **WebSearch/WebFetch** для документации библиотек при необходимости

## Описание вывода

Предоставить краткую сводку на языке, указанном в spec.json:

1. **Выполненные задачи**: Номера задач и результаты тестов
2. **Статус**: Выполненные задачи помечены в tasks.md, количество оставшихся задач

**Формат**: Кратко (менее 150 слов)

## Безопасность и Fallback

### Сценарии ошибок

**Задачи не утверждены или отсутствуют файлы спецификации**:
- **Остановить выполнение**: Все файлы спецификации должны существовать и задачи должны быть утверждены
- **Предложенное действие**: "Завершите предыдущие фазы: `/kiro:spec-requirements`, `/kiro:spec-design`, `/kiro:spec-tasks`"

**Падения тестов**:
- **Остановить реализацию**: Исправить падающие тесты перед продолжением
- **Действие**: Отладить и исправить, затем перезапустить

### Выполнение задач

**Выполнить конкретную задачу(и)**:
- `/kiro:spec-impl $1 1.1` - Одна задача
- `/kiro:spec-impl $1 1,2,3` - Несколько задач

**Выполнить все ожидающие**:
- `/kiro:spec-impl $1` - Все непомеченные задачи

think
