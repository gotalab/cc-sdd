# Стандарты API

[Назначение: согласованные паттерны API для именования, структуры, авторизации, версионирования и ошибок]

## Философия
- Предпочтение предсказуемому, ресурсо-ориентированному дизайну
- Явные контракты; минимизация breaking changes
- Безопасность по умолчанию (сначала auth, минимальные привилегии)

## Паттерн эндпоинтов
```
/{version}/{resource}[/{id}][/{sub-resource}]
```
Примеры:
- `/api/v1/users`
- `/api/v1/users/:id`
- `/api/v1/users/:id/posts`

HTTP глаголы:
- GET (чтение, безопасный, идемпотентный)
- POST (создание)
- PUT/PATCH (обновление)
- DELETE (удаление, идемпотентный)

## Запрос/Ответ

Запрос (типичный):
```json
{ "data": { ... }, "metadata": { "requestId": "..." } }
```

Успех:
```json
{ "data": { ... }, "meta": { "timestamp": "...", "version": "..." } }
```

Ошибка:
```json
{ "error": { "code": "ERROR_CODE", "message": "...", "field": "опционально" } }
```
(См. error-handling для правил.)

## Коды статусов (паттерн)
- 2xx: Успех (200 чтение, 201 создание, 204 удаление)
- 4xx: Проблемы клиента (400 валидация, 401/403 auth, 404 не найдено)
- 5xx: Проблемы сервера (500 общая, 503 недоступен)
Выбирайте статус, лучше всего отражающий результат.

## Аутентификация
- Учётные данные в стандартном месте
```
Authorization: Bearer {token}
```
- Отклонять неаутентифицированные до бизнес-логики

## Версионирование
- Версия через URL/заголовок/media-type
- Breaking change → новая версия
- Non-breaking → та же версия
- Предоставлять окно deprecation и коммуникацию

## Пагинация/Фильтрация (если применимо)
- Пагинация: `page`, `pageSize` или cursor-based
- Фильтрация: явные query-параметры
- Сортировка: `sort=field:asc|desc`
Возвращать метаданные пагинации в `meta`.

---
_Фокус на паттернах и решениях, не каталогах эндпоинтов._
